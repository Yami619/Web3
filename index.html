<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title> å£¯å£¯ å°ˆæ³¨åŠ›ï¼†è¨˜æ†¶åŠ›è¨“ç·´ï½œç²‰è‰²ç‰ˆ</title>
<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:å¾®è»Ÿæ­£é»‘é«”, sans-serif;
}
/* æ•´é«”ç²‰è‰²èƒŒæ™¯ */
body{
    background:#fff5f7;
    padding:15px;
    text-align:center;
}
.title{
    font-size:24px;
    color:#d65a8a;
    margin:15px 0;
    font-weight:bold;
}
.level-info{
    font-size:17px;
    color:#c2507d;
    margin:8px 0;
}
.step-info{
    font-size:16px;
    color:#c2507d;
    margin:8px 0;
}
/* è¨“ç·´èªªæ˜ç²‰è‰²æ¡† */
.desc-box{
    max-width:380px;
    margin:12px auto;
    padding:10px;
    font-size:15px;
    color:#a8446b;
    line-height:1.6;
    text-align:left;
    background:#fef1f5;
    border:1px solid #f8d7e4;
    border-radius:6px;
}
/* éŠæˆ²å¡ç‰‡æ’ç‰ˆ */
.game-box{
    display:grid;
    gap:8px;
    justify-content:center;
    margin:20px auto;
    max-width:95%;
}
.lv1{ grid-template-columns: repeat(3, 80px); }
.lv2{ grid-template-columns: repeat(4, 78px); }
.lv3{ grid-template-columns: repeat(5, 75px); }
.lv4{ grid-template-columns: repeat(4, 75px); }
.lv5{ grid-template-columns: repeat(4, 72px); }
.lv6{ grid-template-columns: repeat(4, 70px); }
.lv7{ grid-template-columns: repeat(5, 68px); }
.lv8{ grid-template-columns: repeat(5, 66px); }
.lv9{ grid-template-columns: repeat(5, 64px); }
.lv10{ grid-template-columns: repeat(6, 62px); }

/* å¡ç‰‡ç²‰è‰²æ¨£å¼ */
.card{
    width:100%;
    aspect-ratio:1/1;
    background:#f8d7e4;
    border-radius:8px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:24px;
    font-weight:bold;
    color:#222;
    cursor:pointer;
    transition:0.2s;
    user-select:none;
}
.card.flipped{
    background:#ffffff;
    pointer-events:none;
}
.card.matched{
    background:#fce4ec;
    pointer-events:none;
}
/* æŒ‰éˆ•ç²‰è‰² */
.btn{
    padding:10px 22px;
    background:#e9719c;
    color:#fff;
    border:none;
    border-radius:8px;
    font-size:15px;
    margin:10px 5px;
    cursor:pointer;
}
/* æ¯é—œç¿»ç‰Œæ¬¡æ•¸çµ±è¨ˆ */
.stats-box{
    max-width:380px;
    margin:20px auto;
    padding:12px;
    font-size:15px;
    color:#a8446b;
    line-height:1.6;
    text-align:left;
    background:#fef1f5;
    border:1px solid #f8d7e4;
    border-radius:6px;
}
.stats-title{
    font-weight:bold;
    margin-bottom:8px;
    text-align:center;
}
.stats-list{
    display:grid;
    grid-template-columns: repeat(2, 1fr);
    gap:5px;
}
</style>
</head>
<body>

<div class="title"> å£¯å£¯ å°ˆæ³¨åŠ›ï¼†è¨˜æ†¶åŠ›è¨“ç·´ï½œç²‰è‰²ç‰ˆ</div>
<div class="level-info">
    é—œå¡ï¼š<span id="level">1</span> / 10
</div>
<div class="step-info">
    ç¿»ç‰Œæ¬¡æ•¸ï¼š<span id="step">0</span>
</div>

<!-- è¨“ç·´æ–¹å¼èªªæ˜ + é˜²ä½œå¼Šè¦å‰‡ -->
<div class="desc-box">
 è¨“ç·´ç›®æ¨™ï¼š<br>
    1. å°ˆæ³¨åŠ›ï¼šå°ˆå¿ƒçœ‹æ¯ä¸€å¼µç¿»é–‹çš„ç‰Œ<br>
    2. è¨˜æ†¶åŠ›ï¼šè¨˜ä½åœ–æ¡ˆå‡ºç¾çš„ä½ç½®<br>
    3. å®Œæˆä¸€é—œè‡ªå‹•è§£é–ä¸‹ä¸€é—œï¼Œ10é—œå…¨ç ´è¨“ç·´æˆåŠŸ<br>
    4. å·²ç”Ÿæˆå°ˆå±¬4ç¢¼è‹±æ–‡+æ•¸å­—ï¼Œé‡æ–°æ•´ç†æˆ–æ›´æ›é é¢ï¼Œç·¨ç¢¼æœƒæ”¹è®Šï¼Œæ™´è¦åŠ æ²¹ ï¼</div>

<!-- é˜²ä½œå¼Š 4 ç¢¼é¡¯ç¤º -->
<div style="margin:10px 0; font-size:16px; color:#d65a87;">
æœ¬æ¬¡è¨“ç·´ç·¨ç¢¼ï¼š<span id="secretCode" style="font-weight:bold; letter-spacing:2px;"></span>
</div>

<div id="gameBox" class="game-box"></div>

<button class="btn" onclick="checkResetPassword()">é‡æ–°é–‹å§‹</button>

<!-- æ¯é—œç¿»ç‰Œæ¬¡æ•¸çµ±è¨ˆ -->
<div class="stats-box">
    <div class="stats-title">æ¯é—œç¿»ç‰Œæ¬¡æ•¸çµ±è¨ˆ</div>
    <div class="stats-list" id="statsList"></div>
</div>

<script>
// ç”Ÿæˆä¸€æ¬¡å›ºå®š 4 ç¢¼è‹±æ–‡+æ•¸å­—ï¼ˆé˜²é‡æ–°æ•´ç†ï¼‰
function generateSecretCode() {
    const chars = 'ABCDEFGHJKLMNPQRSTWXYZ23456789';
    let code = '';
    for (let i = 0; i < 4; i++) {
        code += chars[Math.floor(Math.random() * chars.length)];
    }
    return code;
}

// é é¢ä¸€è¼‰å…¥å°±ç”Ÿæˆ
const secretCode = generateSecretCode();
document.getElementById('secretCode').innerText = secretCode;

const levelConfig = [
  { pairs:3, grid:'lv1' },
  { pairs:4, grid:'lv2' },
  { pairs:5, grid:'lv3' },
  { pairs:6, grid:'lv4' },
  { pairs:7, grid:'lv5' },
  { pairs:8, grid:'lv6' },
  { pairs:9, grid:'lv7' },
  { pairs:10, grid:'lv8' },
  { pairs:11, grid:'lv9' },
  { pairs:12, grid:'lv10' }
];

const numberPool = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24];
const colorList = ["#ff4444","#00C851","#33b5e5","#ffbb33","#aa66cc","#ff8800","#0099cc","#99cc00","#ff4444","#33b5e5","#aa66cc","#ff8800"];

let currentLevel = 1;
let cards = [];
let flipped = [];
let matched = 0;
let steps = 0;
let levelSteps = Array(10).fill(0); // è¨˜éŒ„æ¯é—œç¿»ç‰Œæ¬¡æ•¸

function startGame(){
  const config = levelConfig[currentLevel-1];
  document.getElementById('level').innerText = currentLevel;
  document.getElementById('step').innerText = '0';

  const box = document.getElementById('gameBox');
  box.className = 'game-box ' + config.grid;
  box.innerHTML = '';

  cards = [];
  flipped = [];
  matched = 0;
  steps = 0;

  let pairList = [];
  for(let i=0;i<config.pairs;i++){
    pairList.push(numberPool[i]);
    pairList.push(numberPool[i]);
  }
  pairList = pairList.sort(()=>Math.random()-0.5);

  pairList.forEach(num=>{
    const card = document.createElement('div');
    card.className = 'card';
    card.dataset.num = num;
    card.onclick = ()=>flipCard(card);
    box.appendChild(card);
    cards.push(card);
  });

  updateStatsDisplay(); // æ›´æ–°çµ±è¨ˆé¡¯ç¤º
}

function flipCard(card){
  if(flipped.length >=2) return;
  if(card.classList.contains('flipped')) return;

  const num = parseInt(card.dataset.num);
  card.classList.add('flipped');
  card.innerText = num;
  card.style.color = colorList[(num-1) % colorList.length];

  flipped.push(card);
  steps++;
  document.getElementById('step').innerText = steps;

  if(flipped.length ===2){
    setTimeout(checkMatch,500);
  }
}

function checkMatch(){
  const [a,b] = flipped;
  if(a.dataset.num === b.dataset.num){
    a.classList.add('matched');
    b.classList.add('matched');
    matched +=2;

    const total = levelConfig[currentLevel-1].pairs *2;
    if(matched === total){
      levelSteps[currentLevel-1] = steps; // è¨˜éŒ„æœ¬é—œç¿»ç‰Œæ¬¡æ•¸
      setTimeout(()=>{
        if(currentLevel < 10){
          alert(`å®Œæˆç¬¬${currentLevel}é—œï¼Œè‡ªå‹•é€²å…¥ç¬¬${currentLevel+1}é—œ`);
          currentLevel++;
          startGame();
        }else{
          alert("ğŸ‰ 10é—œå…¨éƒ¨å®Œæˆï¼å°ˆæ³¨åŠ›è¨“ç·´æˆåŠŸï¼å¯ä»¥å¹«å¦³å®Œæˆä¸€å€‹å°é¡˜æœ›ï¼");
          updateStatsDisplay(); // å®Œæˆå¾Œæ›´æ–°çµ±è¨ˆ
        }
      },300);
    }
  }else{
    a.classList.remove('flipped');
    b.classList.remove('flipped');
    a.innerText = '';
    b.innerText = '';
  }
  flipped = [];
}

// æ›´æ–°çµ±è¨ˆé¡¯ç¤º
function updateStatsDisplay() {
  const statsList = document.getElementById('statsList');
  statsList.innerHTML = '';
  for(let i=0; i<10; i++){
    const statItem = document.createElement('div');
    statItem.textContent = `ç¬¬${i+1}é—œï¼š${levelSteps[i]}æ¬¡`;
    if(levelSteps[i] > 0){
      statItem.style.color = '#d65a8a';
      statItem.style.fontWeight = 'bold';
    }
    statsList.appendChild(statItem);
  }
}

// é‡æ–°é–‹å§‹å¯†ç¢¼é©—è­‰
function checkResetPassword(){
  let input = prompt("è«‹è¼¸å…¥é‡æ–°é–‹å§‹å¯†ç¢¼ï¼š");
  if(input === null) return;
  if(input == "787831"){
    resetAll();
    alert("å¯†ç¢¼æ­£ç¢ºï¼Œå·²é‡æ–°é–‹å§‹ï¼");
  }else{
    alert("å¯†ç¢¼éŒ¯èª¤ï¼Œç„¡æ³•é‡æ–°é–‹å§‹ï¼");
  }
}

function resetAll(){
  currentLevel = 1;
  levelSteps = Array(10).fill(0); // é‡ç½®çµ±è¨ˆ
  startGame();
}

window.onload = startGame;
</script>
</body>
</html>
